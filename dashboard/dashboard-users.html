<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800&family=Montserrat:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />   
<link rel="stylesheet" href="../css/style.css" />
<link rel="shortcut icon" href="../assets/images/logo-color.svg" type="image/x-icon">
    <title>My Brand</title>
  </head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  <body>
    <div class="dashboard-container">
        
        <div class="error-container" id="error-container">
            <span class="material-symbols-outlined" id="error-icon"> error </span>
            <p id="error-text" class="error-text"></p>
          </div>
          
          <div class=" success-container" id="success-container">
            <span class="material-symbols-outlined" id="error-icon"> check_circle </span>
            <p id="success-text" class="success-text"></p>
          </div>

    <aside class="dashboard-sidebar">
        <a href="../index.html" class="dashboard-image-logo">
            <img src="../assets/images/logo.png" alt="logo"/>
        </a>

        <div class="dashboard-links-container">
            <a href="./dashboard.html" class="rounded-text grey-text category-tag dashboard-link" >
                <img src="../assets//images//dashboard-icons/dashboard.svg" alt="">
                <p>Dashboard</p>
            </a>
            <a href="./dashboard-articles.html" class="rounded-text grey-text category-tag dashboard-link">
                <img src="../assets//images//dashboard-icons/articles.svg" alt="">
                <p>Articles</p>
            </a>
            <a href="./dashboard-messages.html" class="rounded-text grey-text category-tag dashboard-link">
                <img src="../assets//images//dashboard-icons/messages.svg" alt="">
                <p>Messages</p>
            </a>
            <a href="./dashboard-users.html" class="rounded-text grey-text category-tag dashboard-link" id="active-dashboard-link">
                <img src="../assets//images//dashboard-icons/users.svg" alt="" >
                <p>Users</p>
            </a>
            <a href="./dashboard-projects.html" class="rounded-text grey-text category-tag dashboard-link">
                <img src="../assets//images//dashboard-icons/projects.svg" alt="">
                <p>Projects</p>
            </a>
            <a href="./dashboard-tesimonial.html" class="rounded-text grey-text category-tag dashboard-link">
                <img src="../assets//images//dashboard-icons/testimonial.svg" alt="">
                <p>Testimonials</p>
            </a>
        </div>
        <button
          class="rounded-text grey-text category-tag dashboard-link dashboard-logout"
          id="logout-button">
          <p>Logout</p>
          <img src="../assets//images//dashboard-icons/logout.svg" alt="" />
        </button>
    </aside>

    <div class="dashboard-content-container">

        <div class="dashboard-header">
            <div class="dashboard-menu-search">
                <div class="burger">
                    <div class="burger-line burger-line1"></div>
                    <div class="burger-line burger-line2" ></div>
                    <div class="burger-line burger-line3"></div>
                 </div>
                <div class="input-for search-form">
                <input type="search" name="email" id="email" placeholder="Enter Your Email"/>
                <span class="material-symbols-outlined">
                    search
                    </span>
              </div> 
            </div>
           
            <div class="dashboard-user-info">
                <img src="../assets/images/my-avatar.svg" alt="avatar" class="avatar">
                <div>
                    <p class="white-text small-text title">Angelo Christian</p>
                    <p class="grey-text small-text">Admin</p>
                </div>
            </div>
        </div>
        <div class="dashboard-content">
        <div class="dashboard-tags-container">
            <div class="dashboard-tag">
                <img src="../assets/images/dashboard-icons/articles.svg" alt="">
                <div>
                    <p class="title white-text">Total Visitors</p>
                    <p class="title grey-text big-text">20</p>
                </div>
            </div>
            <div class="dashboard-tag">
                <img src="../assets/images/dashboard-icons/articles.svg" alt="">
                <div>
                    <p class="title white-text">Subscribers</p>
                    <p class="title grey-text big-text">20</p>
                </div>
            </div>
            <div class="dashboard-tag">
                <img src="../assets/images/dashboard-icons/articles.svg" alt="">
                <div>
                    <p class="title white-text">CV Downloads</p>
                    <p class="title grey-text big-text">20</p>
                </div>
            </div>
            <div class="dashboard-tag">
                <img src="../assets/images/dashboard-icons/articles.svg" alt="">
                <div>
                    <p class="title white-text">New Users</p>
                    <p class="title grey-text big-text">20</p>
                </div>
            </div>

        </div>
        <div class="dashboard-data-container dashboard-users-stats">
            <div class="dashboard-graph">
                <canvas id="myChart" style="width:100%;"></canvas>

                <script>
                    const xValues = [100,200,300,400,500,600,700,800];
                    
                    new Chart("myChart", {
                      type: "line",
                      title: {
		text: "Growth in Internet Users Globally"
	},
                      data: {
                        labels: xValues,
                        datasets: [ { 
                          data: [1600,1700,1700,1900,2000,2700,4000,5000],
                          borderColor: "green",
                          fill: false
                        }, { 
                          data: [300,700,2000,5000,6000,4000,2000,1000],
                          borderColor: "blue",
                          fill: false
                        }]
                      },
                      options: {
                        legend: {display: false}
                      }
                    });
                    </script>
                    

            </div>
            <div class="dashboard-blog-container dashboard-users">
                <div class="dashboard-blog-container-upper">
                    <p class="title white-text small-text"> Recent Subscription</p>
                                        
                </div>
                <div class="dashboard-blog-container-map" id="dashboard-user-container-map">
                    <div class="dashboard-blog-container-card dashboard-user-container-card">
                        <img src="../assets//images/no-profile.webp" alt="image" class="blog-card-image user-card-image">
                        <div class="blog-card-details users-card-details">
                            <p class="title small-text">Mutoni Evoyne</p>
                            <p class=" smaller-text">evoynemutoni@gmail.com</p>
                            <p class=" smaller-text">0785534266</p>
 
                        </div>
                    </div>
                    <div class="dashboard-blog-container-card dashboard-user-container-card">
                        <img src="../assets//images/no-profile.webp" alt="image" class="blog-card-image user-card-image">
                        <div class="blog-card-details users-card-details">
                            <p class="title small-text">Mutoni Evoyne</p>
                            <p class=" smaller-text">evoynemutoni@gmail.com</p>
                            <p class=" smaller-text">0785534266</p>
 
                        </div>
                    </div>
                    <div class="dashboard-blog-container-card dashboard-user-container-card">
                        <img src="../assets//images/no-profile.webp" alt="image" class="blog-card-image user-card-image">
                        <div class="blog-card-details users-card-details">
                            <p class="title small-text">Mutoni Evoyne</p>
                            <p class=" smaller-text">evoynemutoni@gmail.com</p>
                            <p class=" smaller-text">0785534266</p>
 
                        </div>
                    </div>
                    <div class="dashboard-blog-container-card dashboard-user-container-card">
                        <img src="../assets//images/no-profile.webp" alt="image" class="blog-card-image user-card-image">
                        <div class="blog-card-details users-card-details">
                            <p class="title small-text">Mutoni Evoyne</p>
                            <p class=" smaller-text">evoynemutoni@gmail.com</p>
                            <p class=" smaller-text">0785534266</p>
 
                        </div>
                    </div>
                </div>

            </div>
           
        </div>
    </div>
    </div>
    </div>
    <script>
        let allUsers = JSON.parse(localStorage.getItem('users'))
        let usersContainer = document.getElementById('dashboard-user-container-map')
        console.log("allUsers", allUsers)

        usersContainer.innerHTML = ""
            allUsers.forEach(user => {
            let userCard = document.createElement("div");
            // Create div  for each property in the user object
            userCard.classList.add("dashboard-blog-container-card","dashboard-user-container-card")

            // image
            const image = document.createElement("img")
            image.src = "../assets//images/no-profile.webp"
            image.alt = "image"
            image.classList.add("blog-card-image","user-card-image") 
            
            // blog-card-details users-card-details
            const details = document.createElement('div')
            details.classList.add('blog-card-details','users-card-details')

            details.innerHTML = `
            <div class="blog-card-details users-card-details">
                            <p class="title small-text">${user.name}</p>
                            <p class=" smaller-text">${user.email}</p>
                            <p class=" smaller-text">${user.phone}</p>
 
                        </div>
            `

            userCard.appendChild(image)
            userCard.appendChild(details);

            usersContainer.appendChild(userCard)
            });
        
    </script>

    <!-- protect dashboard from unauthorised access -->
    <script>
        const logoutButton = document.getElementById("logout-button");
        const loggedUser = JSON.parse(localStorage.getItem("loggedUser"));
        console.log("loggedUser", loggedUser);
  
        if (!loggedUser || loggedUser.role != "admin") {
          window.location.href =  "../index.html";
        } else {
          
        }
  
        logoutButton.addEventListener("click", () => {
          localStorage.removeItem("loggedUser")
          successContainer.style.display = "flex",
          successElement.innerHTML = "Logged out successfully"
          timeDelay(successContainer, successElement)
          window.location.href = "../index.html";
        });
      </script>
          <script src="../Js/theme.js"></script>

  </body>
</html>
